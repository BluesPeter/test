<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" >
        <meta name="format-detection" content="telephone=no"/>
        <meta name="apple-mobile-web-app-capable" content="no">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <title>测试h5 开客户端</title>
        <style type="text/css">
            html,body{
                max-width:750px;
                margin: 0 auto;
                text-align:center;
            }
            #mcover {position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: rgba(0, 0, 0, 0.7);display: none;z-index: 20000;}
            #mcover img {height: 180px !important;position: fixed;right: 18px;top: 5px;width: 260px !important;z-index: 20001;}
        </style>
    </head>
    <body>
    	<div id="mcover" style="display:none;">
            <img src="" id="mcover_img">
        </div>
        <button id="openApp">打开客户端</button><br/>
        <script type="text/javascript" src="js/tool-nativeSchema.js"></script>
        <script type="text/javascript">
        //点击按钮，第一步，先判断是否是微信
        //是微信，安卓的弹窗安卓的遮罩图，ios的弹窗ios的这招图
        //不是微信，调用loadSchema方法
        window.onload = function(){
        	var mcover = document.querySelector("#mcover");
        	var mcover_img = document.querySelector("#mcover_img");
        	if(nativeSchema.isWx()){
        		mcover.style.display = "block";
        		if(nativeSchema.isAndroid()){
        			mcover_img.setAttribute('src','./img/guide.png');
        		}else if(nativeSchema.isIOS()){
        			mcover_img.setAttribute('src','./img/guide.png');
        		}
        	}else{
        		document.querySelector("#openApp").addEventListener("click",function(){
        			var login = "enterRoom?roomID=190635";
	            nativeSchema.loadSchema({
		                // 通过NN打开某个链接
		                schema: login,
		                //schema头协议，实际情况填写
		                protocal:"qumiaqmj",
		                //发起唤醒请求后，会等待loadWaiting时间，超时则跳转到failUrl，默认3000ms
		                loadWaiting:"3000",
		                //唤起失败时的跳转链接，默认跳转到下载页
		                failUrl:"http://cdn-cn.ejoygames.com/aqmj/download.html",
		                // apk信息,请根据实际情况填写
		                apkInfo:{
		                    PKG: "com.gamefun.android.aqmj",
		                    CATEGORY: "android.intent.category.DEFAULT",
		                    ACTION: "android.intent.action.VIEW"
		                }
		            });
        		})
        	}
        }

        </script>
    </body>